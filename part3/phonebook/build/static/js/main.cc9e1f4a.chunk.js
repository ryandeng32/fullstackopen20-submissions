(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),a=n(6),o=n(3),u=n(2),i=n(0),s=function(e){var t=e.filter,n=e.setFilter;return Object(i.jsxs)("div",{children:["filter shown with:",Object(i.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},d=function(e){var t=e.newName,n=e.newNumber,r=e.setNewName,c=e.setNewNumber,a=e.handleSubmit;return Object(i.jsxs)("form",{onSubmit:a,children:[Object(i.jsxs)("div",{children:["name:",Object(i.jsx)("input",{value:t,onChange:function(e){return r(e.target.value)}})]}),Object(i.jsxs)("div",{children:["number:",Object(i.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.persons,n=e.handleDelete;return Object(i.jsx)(i.Fragment,{children:t.map((function(e){return Object(i.jsxs)("p",{children:[e.name," ",e.phone," ",Object(i.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},e.name)}))})},b=n(4),l=n.n(b),f="/api/persons",h=function(){return l.a.get(f).then((function(e){return e.data}))},m=function(e){return l.a.post(f,e).then((function(e){return e.data}))},p=function(e,t){return l.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},O=function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},v=(n(39),function(e){var t=e.notification,n=t.message,r=t.type;return null===n?null:Object(i.jsx)("div",{className:r,children:n})}),x=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)(""),b=Object(o.a)(c,2),l=b[0],f=b[1],x=Object(u.useState)(""),g=Object(o.a)(x,2),w=g[0],N=g[1],y=Object(u.useState)(""),S=Object(o.a)(y,2),k=S[0],C=S[1],D=Object(u.useState)({message:null,type:"success"}),F=Object(o.a)(D,2),E=F[0],J=F[1];Object(u.useEffect)((function(){h().then((function(e){return r(e)}))}),[]);var L=k?n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})):n,B=function(e){var t=e.message,n=e.type;J({message:t,type:n}),setTimeout((function(){J(Object(a.a)(Object(a.a)({},E),{},{message:null}))}),3e3)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(v,{notification:E}),Object(i.jsx)(s,{filter:k,setFilter:C}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(d,{newName:l,newNumber:w,setNewName:f,setNewNumber:N,handleSubmit:function(e){e.preventDefault();for(var t=function(e){if(n[e].name===l)return window.confirm("".concat(l," is already added to phonebook, replace the old phone with a new one?"))&&(p(n[e].id,{name:l,phone:w}).then((function(t){return r(n.map((function(r){return r.id===n[e].id?t:r})))})).catch((function(e){B({message:e.response.data.error,type:"error"})})),f(""),N("")),{v:void 0}},c=0;c<n.length;c++){var a=t(c);if("object"===typeof a)return a.v}m({name:l,phone:w}).then((function(e){r(n.concat(e)),B({message:"added ".concat(l),type:"success"})})).catch((function(e){B({message:e.response.data.error,type:"error"})})),f(""),N("")}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(j,{persons:L,handleDelete:function(e){O(e).catch((function(){B({message:"already deleted",type:"error"})})),r(n.filter((function(t){return t.id!==e})))}})]})};c.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.cc9e1f4a.chunk.js.map